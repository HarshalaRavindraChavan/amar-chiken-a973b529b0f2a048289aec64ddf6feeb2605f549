{"version":3,"sources":["Authuser.js"],"names":["_react","_interopRequireWildcard","require","_axios","_interopRequireDefault","_reactRouterDom","Authuser","navigate","useNavigate","_useState2","_slicedToArray","JSON","tokenString","sessionStorage","getItem","parse","error","console","getToken","token","_useState4","useState","userString","getUser","user","http","axios","create","baseURL","headers","Authorization","concat","useEffect","defaults","setToken","setItem","stringify","setUser","logout"],"mappings":"4UAAA,IAAAA,OAAAC,wBAAAC,QAAA,UACAC,OAAAC,uBAAAF,QAAA,UACAG,gBAAAH,QAAA,izCAEA,IAAMI,SAAW,WACf,IAAMC,GAAW,EAAAF,gBAAAG,eADIC,EAAAC,gBAOIC,EAAAA,OAAAA,UAHR,WARnB,IAUM,IAAMC,EAAcC,eAAeC,QAAQ,SATjD,OAAAF,EAAAD,KAAAI,MAAAH,GAAA,KAWM,MAAOI,GAEP,OAZNC,QAAAD,MAAA,yBAAAA,GAYa,MAHcE,IAPJ,GAOjBC,EAPiBV,EAAA,GAOVG,EAPUH,EAAA,GAAAW,EAAAV,gBAQH,EAAAV,OAAAqB,UAMF,WACd,IACE,IAAMC,EAAaT,eAAeC,QAAQ,QAC1C,OAAOQ,EAAaX,KAAKI,MAAMO,GAAc,KAC7C,MAAON,GAEP,OADAC,QAAQD,MAAM,wBAAyBA,GAChC,MAZOO,IARG,GAQjBC,EARiBJ,EAAA,GAQVJ,EARUI,EAAA,GAWlBK,EAAAC,OAAAA,QAAAC,OAAA,CAPHC,QAAA,gCAiCEC,QAAS,CAvBLN,eAAU,sBACdO,cAAIX,EAAA,UAAAY,OAAAZ,GAAA,OAKF,EAAAnB,OAAAgC,WAAA,WACDP,EAAAQ,SAAAJ,QAAAC,cAAAX,EAAA,UAAAY,OAAAZ,GAAA,IAPH,CAAAA,IAdqB,MAAA,CAAAe,SAwBH,SAACV,EAAML,GAxBrBb,eAAW6B,QAAX7B,QAAiBK,KAAAyB,UAAAjB,IACrBN,eAAiBsB,QAAA,OAAAxB,KAAAyB,UAAAZ,IA0BfU,EAASf,GAvBXkB,EAAMnB,IAJeC,MAAAA,EA2DnBK,KAAAA,EA3DmBC,KAAAA,EAAAa,OAyBnBzB,WACAA,eAAesB,QACfD,EAASf,MACTkB,EAAQb,MAJVjB,EAAA,iBAyCaD","file":"Authuser.min.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Authuser = () => {\r\n  const navigate = useNavigate();\r\n\r\n  // Helper functions for session management\r\n  const getToken = () => {\r\n    try {\r\n      const tokenString = sessionStorage.getItem('token');\r\n      return tokenString ? JSON.parse(tokenString) : null;\r\n    } catch (error) {\r\n      console.error('Failed to parse token:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const getUser = () => {\r\n    try {\r\n      const userString = sessionStorage.getItem('user');\r\n      return userString ? JSON.parse(userString) : null;\r\n    } catch (error) {\r\n      console.error('Failed to parse user:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const saveToken = (user, token) => {\r\n    sessionStorage.setItem('token', JSON.stringify(token));\r\n    sessionStorage.setItem('user', JSON.stringify(user));\r\n    setToken(token);\r\n    setUser(user);\r\n  };\r\n\r\n  const [token, setToken] = useState(getToken());\r\n  const [user, setUser] = useState(getUser());\r\n\r\n  // Create Axios instance with dynamic headers\r\n  const http = axios.create({\r\n    baseURL: 'http://localhost:5001/userAPI',\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n      Authorization: token ? `Bearer ${token}` : '',\r\n    },\r\n  });\r\n\r\n  // Update axios headers whenever the token changes\r\n  useEffect(() => {\r\n    http.defaults.headers.Authorization = token ? `Bearer ${token}` : '';\r\n  }, [token]);\r\n\r\n  // Handle logout and navigate to home\r\n  const logout = () => {\r\n    sessionStorage.clear();\r\n    setToken(null);\r\n    setUser(null);\r\n    navigate('/');\r\n  };\r\n\r\n  return {\r\n    setToken: saveToken,\r\n    token,\r\n    user,\r\n    http,\r\n    logout,\r\n  };\r\n};\r\n\r\nexport default Authuser;\r\n"]}